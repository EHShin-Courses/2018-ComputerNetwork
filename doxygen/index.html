<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>KENSv3: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="anlab-logo-icon-only.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">KENSv3
   </div>
   <div id="projectbrief">KAIST Educational Network System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">KENSv3 Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>KENS series have been used for programming assignment in CS341: Introduction to Computer Network in KAIST. First version of KENS(v1) had been developed by Network Computing Lab(<a href="http://nclab.kaist.ac.kr/kens/">http://nclab.kaist.ac.kr/kens/</a>), 2005. This version had been used until 2013.</p>
<p>KENSv2 is an improvement version from KENSv1, which contains basic unit test mechanism. Since KENSv2, we provided students an adversary solution which work along with students' solution. This solution was provided in binary form, and enabled incremental development of network functionalities. For example, we had to implement both connect and accept for basic execution. From KENSv2, the implementation could be modularized in system call level. This version was used in 2014 (<a href="https://an.kaist.ac.kr/courses/2014/cs341/">https://an.kaist.ac.kr/courses/2014/cs341/</a>) and the experience of using it has been published at SIGCSE 2015 (<a href="http://an.kaist.ac.kr/~sbmoon/paper/intl-conf/2015-sigcse-kensv2.pdf">http://an.kaist.ac.kr/~sbmoon/paper/intl-conf/2015-sigcse-kensv2.pdf</a>). The source code is managed by Advanced Networking Lab in KAIST.</p>
<p>KENSv1: <a href="https://github.com/ANLAB-KAIST/KENSv1">https://github.com/ANLAB-KAIST/KENSv1</a></p>
<p>KENSv2: <a href="https://github.com/ANLAB-KAIST/KENSv2">https://github.com/ANLAB-KAIST/KENSv2</a></p>
<p>From 2015, we are using KENSv3 which is developed from a clean state. However its philosophy has been adopted from KENSv2 and KENSv1. KENSv3 has more powerful features than KENSv2.</p>
<ul>
<li>POSIX equivalent system call layer.</li>
<li>Equivalent simulation power against ns2.</li>
<li>Modular architecture for multiple protocol layers to work together.</li>
</ul>
<h1>What is KENSv3?</h1>
<h2>KENSv3 is an educational framework.</h2>
<p>KENSv3 provides useful template for building prototypes of Ethernet/ARP/IP/TCP and many other network layers. Also, it contains automated grading system to verify the completeness of each implementation. There are solution binaries in KENSv3 which enables incremental building of network functions.</p>
<h2>KENSv3 is a network simulator</h2>
<p>Virtual network devices of KENSv3 simulates queuing effect of switched network. So it can be used for precise network simulations like ns2. All packets are recorded as pcap log files which can be analyzed by Wireshark or other analysis tools.</p>
<h2>KENSv3 is a virtual execution environment</h2>
<p>KENSv3 can execute actual network application source written in C. The system call requests from applications are linked with proper network layer.</p>
<p>#How to run KENSv3?</p>
<h2>Building KENSv3</h2>
<ul>
<li>Check that your compiler supports C++11 and GNU extension (At least 4.8.2 for gcc, LLVM 6.0 for MAC c++). <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;g++ -std=c++11</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;g++ -std=gnu++11</div>
</div><!-- fragment --></li>
<li>Check that gtest (Google Test) library is installed in your system. <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;gtest/gtest.h&gt;</span></div>
</div><!-- fragment --> We also need pthread library (or other implementation for C++11 Threading library). <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;g++ -std=gnu++11 -lgtest -lpthread</div>
</div><!-- fragment --> To build documentation, you need Doxygen.</li>
<li>Build <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#cd KENSv3</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make depend # dependency check</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;#header changes will trigger rebuilding of affected source</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;make all</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;make doxygen # for making documentation (need Doxygen)</div>
</div><!-- fragment --></li>
</ul>
<p>Solution binary for your architecture is needed for building KENS. Currently, we support Cygwin 64bit, Linux 64bit, and Mac OS 64bit.</p>
<h2>Running KENSv3</h2>
<p>In build directory, testTCP binary will be created after building KENS. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./testTCP # run all tests</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;./testTCP --getst_filter=&quot;TestEnv_Reliable.TestOpen&quot; # run specific test</div>
</div><!-- fragment --><p> See Google Test documentation for further usage.</p>
<p>We provide commands for partial tests. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#cd KENSv3</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make test_part1</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;make test_part2 #also checks test_part1</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;make test_part3 #also checks test_part2</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;make test_part4 #also checks test_part3</div>
</div><!-- fragment --><h2>Running KENSv3 using solution binary bundle</h2>
<p>Defining symbol RUN_SOLUTION will build testTCP in solution only mode. You have to clean and rebuild the whole project. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#cd KENSv3</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;export EXTRA_CXXFLAGS=&quot;-DRUN_SOLUTION&quot;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;make all</div>
</div><!-- fragment --><p>#How to do KENSv3 project?</p>
<h2>Template source</h2>
<p>In TestTCP folder, there are one source file and one header file. You are allowed to modify TCPAssignment.cpp and <a class="el" href="_t_c_p_assignment_8hpp_source.html">TCPAssignment.hpp</a>. Also, you can add member fields to "class TCPAssignment". Any source files in TestTCP folder are automatically included in the build path.</p>
<h2>What you have to do?</h2>
<ol type="1">
<li>Handling system calls See the documentation for how to handle with blocking system calls.</li>
<li>Context management You have to manage a global context (usually member variables of TCPAssignment). Also, you have to split incoming packets and system call requests. Use IP address and port number for classifying packets, and pid(process id) and fd(file descriptor number) for classifying application sockets. Until here is test_part1.</li>
<li>Handshaking Implement 3-way handshaking for connect/accept and 4-way handshaking for close. Until here is test_part2.</li>
</ol>
<ol type="1">
<li>Flow control You may block read/write calls if you have no data from TCP window or you TCP window is full. Handle with read/write and generate/process proper TCP packets for data transmission. Until here is test_part3.</li>
<li>Recovery You have to handle with losses, reorders, and packet corruption.</li>
<li>Congestion control Implement AIMD congestion control mechanism for test_part4. You can observe convergence graph from pcap logs. If you did not implement congestion control algorithm, you may not pass test_part4. There would be retransmission storms and applications may not finish in time. Until here is test_part4. </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 5 2015 03:15:30 for KENSv3 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
